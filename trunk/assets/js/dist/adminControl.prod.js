"use strict";jQuery(function(i){i(document).ready(function(){var o,s,a,e,t,n,r;window.location.href.includes("page=samba-ai-admin-page")&&(function(){var e=window.sambaAicurrentlySelectedTab;i(".wp-has-current-submenu").removeClass("wp-has-current-submenu").addClass("wp-not-current-submenu");var a=i("#toplevel_page_samba-ai-admin-page"),t=a.find(".wp-submenu-wrap").find("li:not(.wp-submenu-head)"),n=a.find(".wp-not-current-submenu");"feeds"===e&&t[0].classList.add("current"),"analytics"===e&&t[1].classList.add("current"),"personalization"===e&&t[2].classList.add("current"),n.removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu"),a.removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu"),i(".sambaToRemove").remove()}(),function(){var n=i(".js-regeneratePasswordHash");n.on("click",function(e){e.preventDefault(),(n=i(this)).attr("disabled")||confirm(sambaAiTranslations.sambaIDRegenerateConfirm)&&(n.attr("disabled","disabled"),n.removeClass("button-primary"),a())});var a=function(){i.ajax({type:"POST",url:ajaxurl,data:{action:"regeneratePasswordHash"},success:function(){n.removeAttr("disabled"),n.addClass("button-primary"),alert(sambaAiTranslations.successRegeneratedAccessPassword),location.reload()},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t),n.removeAttr("disabled"),n.addClass("button-primary"),alert(sambaAiTranslations.generalError)}})}}(),function(){var t=i(".js-setTrialMode");t.on("change",function(e){t.attr("disabled","disabled");var a=t.is(":checked")?"checked":"non-checked";n(a)});var n=function(e){i.ajax({type:"POST",url:ajaxurl,data:{action:"setTrialMode",ajax_mode:!0,value:e},success:function(){},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t),alert(sambaAiTranslations.generalError)},complete:function(){i(".js-setTrialMode").removeAttr("disabled")}})}}(),function(){var t=i(".js-saveUserID-trigger"),n=i(".js-saveUserID-value");t.on("click",function(e){t.attr("disabled","disabled");var a=String(n.val());o(a)});var o=function(e){i.ajax({type:"POST",url:ajaxurl,data:{action:"setSambaUserAnalyticsId",ajax_mode:!0,value:e},success:function(){alert(sambaAiTranslations.successUserIdSave)},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t),alert(sambaAiTranslations.generalError)},complete:function(){i(".js-saveUserID-trigger").removeAttr("disabled")}})}}(),function(){i(".js-widgetList, .js-singleWidget").on("click",".js-deleteWidget-trigger",function(e){var a,t,n;confirm(sambaAiTranslations.confirmShortcodeDeletion)&&((a=i(this)).attr("disabled","disabled"),n=(t=a.closest(".js-widgetLine, .js-singleWidget")).data("id"),o(n,t,a))});var o=function(e,a,t){i.ajax({type:"POST",url:ajaxurl,data:{action:"deleteWidget",ajax_mode:!0,value:e},success:function(){0<a.length&&a.remove(),-1!=window.location.href.indexOf("widgettabid")&&(window.location.href=window.location.href.replace("&widgettabid="+e,""))},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t),alert(sambaAiTranslations.generalError)},complete:function(){t.removeAttr("disabled")}})}}(),function(){var t=i(".js-createWidget-trigger");t.on("click",function(e){t.attr("disabled","disabled");var a=i(".js-widgetList");n(a,t)});var n=function(a,e){i.ajax({type:"POST",url:ajaxurl,data:{action:"createWidget",ajax_mode:!0},success:function(e){a.append('<tr class="sambaAi_widgetLine js-widgetLine" data-id="'.concat(e,'">\n              <td>\n              </td>\n              <td>\n                <input type="text" readonly value=\'[shwidget id="').concat(e,'"]\'>\n              </td>\n              <td class="sambaAi_widgetControlTd">\n                 <a href="').concat(location.href,"&widgettabid=").concat(e,'">\n                   <button class="button button-primary button-medium">').concat(sambaAiTranslations.shortcodeDynamicEdit,'</button>\n                 </a>\n              </td>\n              <td class="sambaAi_widgetControlTd">\n                <button class="button button-secondary button-medium js-deleteWidget-trigger">').concat(sambaAiTranslations.shortcodeDynamicRemove,"</button>\n              </td>\n            </tr>"))},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t),alert(sambaAiTranslations.generalError)},complete:function(){e.removeAttr("disabled")}})}}(),function(){var a=i(".js-updateWidgetSingle-trigger"),t=i(".js-singleWidget");a.on("click",function(e){a.attr("disabled","disabled"),n(t,a)});var n=function(e,a){console.log(e.data("id")),console.log(e.find(".js-widgetUpdateName").val()),console.log(e.find(".js-widgetUpdateContent").val()),i.ajax({type:"POST",url:ajaxurl,data:{action:"updateWidget",ajax_mode:!0,widget_id:e.data("id"),name:e.find(".js-widgetUpdateName").val(),content:e.find(".js-widgetUpdateContent").val()},success:function(){alert(sambaAiTranslations.shortcodeSuccessUpdate)},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t),alert(sambaAiTranslations.generalError)},complete:function(){a.removeAttr("disabled")}})}}(),o={products:!1,productCategories:!1,orders:!1,customers:!1},s=i(".js-reportButtonText"),a=function(){e()},e=function(){s.text(sambaAiTranslations.generatingCustomers),i.ajax({type:"POST",url:ajaxurl,data:{action:"generateXML_customers"},success:function(){o.customers=!0},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t)},complete:function(){t()}})},t=function(){s.text(sambaAiTranslations.generatingOrders),i.ajax({type:"POST",url:ajaxurl,data:{action:"generateXML_orders"},success:function(){o.orders=!0},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t)},complete:function(){n()}})},n=function(){var e=i(".js-regenerateFeedXML");e.removeAttr("disabled"),e.addClass("button-primary"),s.text("");var a="".concat(sambaAiTranslations.reportProducts," ").concat(o.products?sambaAiTranslations.feedSuccess:sambaAiTranslations.feedFailure),t="".concat(sambaAiTranslations.reportCustomers," ").concat(o.customers?sambaAiTranslations.feedSuccess:sambaAiTranslations.feedFailure),n="".concat(sambaAiTranslations.reportOrders," ").concat(o.orders?sambaAiTranslations.feedSuccess:sambaAiTranslations.feedFailure);alert(sambaAiTranslations.feedGenerationDone+" \n\n"+a+"\n"+t+"\n"+n)},(r=i(".js-regenerateFeedXML")).on("click",function(e){e.preventDefault(),(r=i(this)).attr("disabled")||(r.attr("disabled","disabled"),r.removeClass("button-primary"),o.products=!1,o.productCategories=!1,o.orders=!1,o.customers=!1,s.text(sambaAiTranslations.generatingProducts),i.ajax({type:"POST",url:ajaxurl,data:{action:"generateXML_products"},success:function(){o.products=!0},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t)},complete:function(){a()}}))}))})});