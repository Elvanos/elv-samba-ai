"use strict";jQuery(function(l){l(document).ready(function(){var o,r,a,e,t,n,s;window.location.href.includes("page=elv-samba-helper-admin-page")&&(function(){var e=window.elvSambaHelpercurrentlySelectedTab;l(".wp-has-current-submenu").removeClass("wp-has-current-submenu").addClass("wp-not-current-submenu");var a=l("#toplevel_page_elv-samba-helper-admin-page"),t=a.find(".wp-submenu-wrap").find("li:not(.wp-submenu-head)"),n=a.find(".wp-not-current-submenu");"feeds"===e&&t[0].classList.add("current"),"analytics"===e&&t[1].classList.add("current"),"personalization"===e&&t[2].classList.add("current"),n.removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu"),a.removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu"),l(".sambaToRemove").remove()}(),function(){var n=l(".js-regeneratePasswordHash");n.on("click",function(e){e.preventDefault(),(n=l(this)).attr("disabled")||confirm(elvSambaHelperTranslations.sambaIDRegenerateConfirm)&&(n.attr("disabled","disabled"),n.removeClass("button-primary"),a())});var a=function(){l.ajax({type:"POST",url:ajaxurl,data:{action:"regeneratePasswordHash"},success:function(){n.removeAttr("disabled"),n.addClass("button-primary"),alert(elvSambaHelperTranslations.successRegeneratedAccessPassword),location.reload()},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t),n.removeAttr("disabled"),n.addClass("button-primary"),alert(elvSambaHelperTranslations.generalError)}})}}(),function(){var t=l(".js-setTrialMode");t.on("change",function(e){t.attr("disabled","disabled");var a=t.is(":checked")?"checked":"non-checked";n(a)});var n=function(e){l.ajax({type:"POST",url:ajaxurl,data:{action:"setTrialMode",ajax_mode:!0,value:e},success:function(){},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t),alert(elvSambaHelperTranslations.generalError)},complete:function(){l(".js-setTrialMode").removeAttr("disabled")}})}}(),function(){var t=l(".js-saveUserID-trigger"),n=l(".js-saveUserID-value");t.on("click",function(e){t.attr("disabled","disabled");var a=String(n.val());o(a)});var o=function(e){l.ajax({type:"POST",url:ajaxurl,data:{action:"setSambaUserAnalyticsId",ajax_mode:!0,value:e},success:function(){alert(elvSambaHelperTranslations.successUserIdSave)},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t),alert(elvSambaHelperTranslations.generalError)},complete:function(){l(".js-saveUserID-trigger").removeAttr("disabled")}})}}(),function(){l(".js-widgetList, .js-singleWidget").on("click",".js-deleteWidget-trigger",function(e){var a,t,n;confirm(elvSambaHelperTranslations.confirmShortcodeDeletion)&&((a=l(this)).attr("disabled","disabled"),n=(t=a.closest(".js-widgetLine, .js-singleWidget")).data("id"),o(n,t,a))});var o=function(e,a,t){l.ajax({type:"POST",url:ajaxurl,data:{action:"deleteWidget",ajax_mode:!0,value:e},success:function(){0<a.length&&a.remove(),-1!=window.location.href.indexOf("widgettabid")&&(window.location.href=window.location.href.replace("&widgettabid="+e,""))},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t),alert(elvSambaHelperTranslations.generalError)},complete:function(){t.removeAttr("disabled")}})}}(),function(){var t=l(".js-createWidget-trigger");t.on("click",function(e){t.attr("disabled","disabled");var a=l(".js-widgetList");n(a,t)});var n=function(a,e){l.ajax({type:"POST",url:ajaxurl,data:{action:"createWidget",ajax_mode:!0},success:function(e){a.append('<tr class="elv_sambaHelper_widgetLine js-widgetLine" data-id="'.concat(e,'">\n              <td>\n              </td>\n              <td>\n                <input type="text" readonly value=\'[shwidget id="').concat(e,'"]\'>\n              </td>\n              <td class="elv_sambaHelper_widgetControlTd">\n                 <a href="').concat(location.href,"&widgettabid=").concat(e,'">\n                   <button class="button button-primary button-medium">').concat(elvSambaHelperTranslations.shortcodeDynamicEdit,'</button>\n                 </a>\n              </td>\n              <td class="elv_sambaHelper_widgetControlTd">\n                <button class="button button-secondary button-medium js-deleteWidget-trigger">').concat(elvSambaHelperTranslations.shortcodeDynamicRemove,"</button>\n              </td>\n            </tr>"))},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t),alert(elvSambaHelperTranslations.generalError)},complete:function(){e.removeAttr("disabled")}})}}(),function(){var a=l(".js-updateWidgetSingle-trigger"),t=l(".js-singleWidget");a.on("click",function(e){a.attr("disabled","disabled"),n(t,a)});var n=function(e,a){console.log(e.data("id")),console.log(e.find(".js-widgetUpdateName").val()),console.log(e.find(".js-widgetUpdateContent").val()),l.ajax({type:"POST",url:ajaxurl,data:{action:"updateWidget",ajax_mode:!0,widget_id:e.data("id"),name:e.find(".js-widgetUpdateName").val(),content:e.find(".js-widgetUpdateContent").val()},success:function(){alert(elvSambaHelperTranslations.shortcodeSuccessUpdate)},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t),alert(elvSambaHelperTranslations.generalError)},complete:function(){a.removeAttr("disabled")}})}}(),o={products:!1,productCategories:!1,orders:!1,customers:!1},r=l(".js-reportButtonText"),a=function(){e()},e=function(){r.text(elvSambaHelperTranslations.generatingCustomers),l.ajax({type:"POST",url:ajaxurl,data:{action:"generateXML_customers"},success:function(){o.customers=!0},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t)},complete:function(){t()}})},t=function(){r.text(elvSambaHelperTranslations.generatingOrders),l.ajax({type:"POST",url:ajaxurl,data:{action:"generateXML_orders"},success:function(){o.orders=!0},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t)},complete:function(){n()}})},n=function(){var e=l(".js-regenerateFeedXML");e.removeAttr("disabled"),e.addClass("button-primary"),r.text("");var a="".concat(elvSambaHelperTranslations.reportProducts," ").concat(o.products?elvSambaHelperTranslations.feedSuccess:elvSambaHelperTranslations.feedFailure),t="".concat(elvSambaHelperTranslations.reportCustomers," ").concat(o.customers?elvSambaHelperTranslations.feedSuccess:elvSambaHelperTranslations.feedFailure),n="".concat(elvSambaHelperTranslations.reportOrders," ").concat(o.orders?elvSambaHelperTranslations.feedSuccess:elvSambaHelperTranslations.feedFailure);alert(elvSambaHelperTranslations.feedGenerationDone+" \n\n"+a+"\n"+t+"\n"+n)},(s=l(".js-regenerateFeedXML")).on("click",function(e){e.preventDefault(),(s=l(this)).attr("disabled")||(s.attr("disabled","disabled"),s.removeClass("button-primary"),o.products=!1,o.productCategories=!1,o.orders=!1,o.customers=!1,r.text(elvSambaHelperTranslations.generatingProducts),l.ajax({type:"POST",url:ajaxurl,data:{action:"generateXML_products"},success:function(){o.products=!0},error:function(e,a,t){console.log(e.responseText),console.log(a),console.log(t)},complete:function(){a()}}))}))})});